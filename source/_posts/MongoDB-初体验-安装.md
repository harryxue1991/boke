---
title: MongoDB-初体验-安装
date: 2018-03-22 09:37:06
tags:
---

对于数据库我是不太了解的。公司电脑上来就装了MySQL，但是我想装个MongoDB试一下。我们之前公司有个项目开发，后端的同学选择了用MongoDB，虽然不知道有什么区别，但还是感觉好厉害的样子。

首先网上介绍，MongoDB是一个介于关系数据库和非关系数据库之间的产品，是非关系数据库当中功能最丰富，最像关系数据库的。

我在网上也找了关系型数据库和非关系型数据库的特点，优点和缺点，如下表：

<!-- more -->

数据库类型 | 特性 | 优点 | 缺点
----|----|----|----
关系型数据库：SQLite、Oracle、mysql | 1、关系型数据库，是指采用了关系模型来组织数据的数据库；2、关系型数据库的最大特点就是事务的一致性；3、简单来说，关系模型指的就是二维表格模型，而一个关系型数据库就是由二维表及其之间的联系所组成的一个数据组织。 | 1、容易理解：二维表结构是非常贴近逻辑世界一个概念，关系模型相对网状、层次等其他模型来说更容易理解；2、使用方便：通用的SQL语言使得操作关系型数据库非常方便；3、易于维护：丰富的完整性(实体完整性、参照完整性和用户定义的完整性)大大减低了数据冗余和数据不一致的概率；4、支持SQL，可用于复杂的查询。 | 1、为了维护一致性所付出的巨大代价就是其读写性能比较差；2、固定的表结构；3、高并发读写需求；4、海量数据的高效率读写；
非关系型数据库：MongoDb、redis、HBase | 1、使用键值对存储数据；2、分布式；3、一般不支持ACID特性；4、非关系型数据库严格上不是一种数据库，应该是一种数据结构化存储方法的集合。 | 1、无需经过sql层的解析，读写性能很高；2、基于键值对，数据没有耦合性，容易扩展；3、存储数据的格式：nosql的存储格式是key,value形式、文档形式、图片形式等等，文档形式、图片形式等等，而关系型数据库则只支持基础类型。 | 1、不提供sql支持，学习和使用成本较高；2、无事务处理，附加功能bi和报表等支持也不好；

嗯，大致就是这样吧。好了，说了一堆没用的话，我们先吧MongoDB安装上再说。

### MongoDB下载

打开MongoDB官网：<https://www.mongodb.com/>，找到**Download**，然后下载。

我这边都是windows系统的我选择winsows版本安装。

然后下载完后双击安装

![avatar](/images/mongodb/mongo_1.png)

这里我们选择自定义安装，因为下一步可以调整路径，如下图，自定义一个自己的目录

![avatar](/images/mongodb/mongo_2.png)

接着继续，这里有个小问题，就是如下图，圈中的那个钩。如果选中的话，那它在安装过程中会给你安装MongoDB compass，如果目前环境网络不好的情况下，建议把它钩掉，不然会很慢很慢，很慢很慢……

![avatar](/images/mongodb/mongo_3.png)

最后一步步安装完成，点击finish完成即可。

### 创建数据目录

为了方便开发，我将MongoDB的bin目录添加到系统的环境变量里了。怎么添加环境变量，这里我就不多说了。

完成安装后，还需要创建一个文件夹，将数据库文件存放在那里。具体放哪里，自己喜欢吧，不过目录最好要明确。

我参考网上的文档，然后在F盘创建了一个文件夹，**F:\data\db**，接着打开shell，试着启动数据库

```shell
mongod --dbpath F:\data\db
```

然后打开**<http://localhost:27017>**，发现，报错了。
![avatar](/images/mongodb/mongo_error.png)

Σ(⊙▽⊙"a，什么鬼？ssl握手失败，按照步骤我没发现什么问题啊。这个问题确实困扰了我很久，百度了一堆，有人说是mongoDB 3.6版本的问题，降版本就可以了。

我只好再重新下载个3.4版本的，下载地址：<https://www.mongodb.org/dl/win32/x86_64-2008plus-ssl>

把旧的卸了，再安装。。。同样的步骤，打开**<http://localhost:27017>**，如下图，成了！美滋滋
![avatar](/images/mongodb/mongo_4.png)

这里说个问题，要是重新打开不行的话，可以吧**F:\data\db**文件夹清空，再重新尝试一下。

### 配置本地服务

像我们刚刚的操作，其实已经成功启动mongoDB了，但是真正开发想用它，会觉得很麻烦，所以我们需要把它配置好才行。

首先像刚刚一样，在自己确定的文件夹里创建db文件夹，用来存放数据的。
再同目录下创建一个logs文件夹，里面创建一个**mongo.log**文件，（配置文件里会指定它）
最后再同目录下创建**mongo.conf**配置文件，如下图
![avatar](/images/mongodb/mongo_5.png)

配置文件内容：

```config
#数据库路径
dbpath=D:\data\db
#日志输出文件路径
logpath=D:\data\logs\mongo.log
#错误日志采用追加模式
logappend=true
#启用日志文件，默认启用
journal=true
#这个选项可以过滤掉一些无用的日志信息，若需要调试使用请设置为false
quiet=true
#端口号 默认为27017
port=27017
```

这些东西准备好了之后，我们在shell命令窗口里，输入：(注意：这里的shell一定要管理员身份运行，win10的小伙伴要win右键，选择带管理员的shell窗口才行，不然添加失败)

```js
mongod --config "F:\data\mongo.conf" --install --serviceName "MongoDB"
```

路径千万别写错了哦。然后我们查看我们的本地的服务
![avatar](/images/mongodb/mongo_6.png)

看到服务里面已经有了。那我们输入最后一个命令：

```shell
net start MongoDB
```

如下图，启动成功了。
![avatar](/images/mongodb/mongo_7.png)

我们再访问以下**http://localhost:27017**，美滋滋。

### 总结

其实安装MongoDB总体来说还是非常简单的，但是我在安装3.6.3版本的时候报的那个错，还是没有解决，不知道是什么原因。不过降版本后，最后还是完成了，成功启动了数据库。

好了，简单的安装就到这里了。
